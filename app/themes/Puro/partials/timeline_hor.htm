{% partial 'block_head' %}
<div class="history-timeline row">
  <div {% if box.inverse %}class="order-2"{% endif %}>
      <{{ box.titleStyle }} id="timeline-title">{{ box.title | raw }}</{{ box.titleStyle }}>
      <div id="timeline-text">{{ box.description | raw }}</div>
  </div>
  <div class="timeline-line {% if box.inverse %}order-1{% endif %}">
    {% for item in box.timeline_items %}
      <div class="timeline-item {% if loop.first %}active{% endif %}" 
           data-title="{{ item.title }}" 
           data-text="{{ item.text }}">
        <div class="circle"></div>
        <span>{{ item.year }}</span>
      </div>
    {% endfor %}
  </div>
</div>
{% partial 'block_footer' %}
{% put styles %}
<style>
.history-timeline {
  text-align: center;
  padding: 30px;
}
.history-timeline p {
  font-size: 14px;
  color: #777;
  max-width: 600px;
  margin: 0 auto 30px auto;
}
.timeline-line {
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  padding: 40px 0;
}
.timeline-line::before {
  content: '';
  position: absolute;
  top: 38%;
  left: 0;
  right: 0;
  height: 4px;
  background: {{ box.linecolor }};
  transform: translateY(-50%);
}
.timeline-item {
  position: relative;
  text-align: center;
  cursor: pointer;
  transition: transform 0.3s ease;
}
.timeline-item .circle {
  width: 20px;
  height: 20px;
  border: 4px solid {{ box.dotcolor }};
  border-radius: 50%;
  background-color: white;
  margin: 0 auto 5px;
  transition: all 0.3s ease;
  position: relative;
  z-index: 1;
}
.timeline-item.active .circle {
  background-color: {{ box.dotcolor }};
  transform: scale(1.3);
}
.timeline-item:hover {
  transform: scale(1.05);
}
#timeline-title,
#timeline-text {
  transition: opacity 0.3s ease;
}
.fade-out {
  opacity: 0;
}
.fade-in {
  opacity: 1;
}
</style>
{% endput %}
{% put scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const items = document.querySelectorAll('.timeline-item');
    const titleEl = document.getElementById('timeline-title');
    const textEl = document.getElementById('timeline-text');

    items.forEach(item => {
      item.addEventListener('click', () => {
        items.forEach(el => el.classList.remove('active'));
        item.classList.add('active');

        titleEl.classList.add('fade-out');
        textEl.classList.add('fade-out');

        setTimeout(() => {
          titleEl.innerHTML = item.dataset.title;
          textEl.innerHTML = item.dataset.text;

          titleEl.classList.remove('fade-out');
          textEl.classList.remove('fade-out');
          titleEl.classList.add('fade-in');
          textEl.classList.add('fade-in');
        }, 300); 

        setTimeout(() => {
          titleEl.classList.remove('fade-in');
          textEl.classList.remove('fade-in');
        }, 600);
      });
    });
  });
</script>
{% endput %}