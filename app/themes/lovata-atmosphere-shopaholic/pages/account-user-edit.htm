title = "Edit User"
url = "/account/users/:slug"
layout = "main"
is_hidden = 0

[UserPage]
slug = ""
slug_required = 0
redirect_on = 0
mode = "show"
flash_on = 0
login_page = "sign-in"

[UserChildrenPage]
slug = "{{ :slug }}"
slug_required = 1
mode = "ajax"
==
<?php
function onInit()
{
    $this['path_page_js'] = 'js/pages/account-user-edit.js';

    $bHasUserPlugin = $this['bHasUserPlugin'];

    if (!$bHasUserPlugin) {
        return $this->controller->run('404');
    }
}
?>
==
{% set arBreadcrumbs = [
    { 'name': 'account_my_account'|_, 'url': 'account'|page },
    { 'name': 'account_users'|_, 'url': 'account-users'|page },
    { 'name': 'account_user_edit'|_ },
] %}

{% partial 'common/breadcrumbs' arBreadcrumbs=arBreadcrumbs %}

<div class="mb-8 mt-1 lg:mb-16">
    <h1 class="uppercase text-xl mb-4 font-medium lg:text-3xl">{{'account_user_edit'|_}}</h1>
    <section class="mb-12">
         <form id="edit-user-form" class="_required grid grid-cols-1 md:grid-cols-2 gap-4">
            <input type="hidden" name="parent_id" value="{{ obUserEdit.parent_id }}">
            <input type="hidden" name="id" value="{{ obUserEdit.id }}">
            {% partial 'form/input'
                labelText = 'profile_first_name'|_
                type = 'text'
                id = 'name'
                name = 'name'
                value = obUserEdit.name
                required = 'required'
                labelClasses = 'text-sm'
            %}

            {% partial 'form/input'
                labelText = 'profile_last_name'|_
                type = 'text'
                id = 'last_name'
                name = 'last_name'
                value = obUserEdit.last_name
                required = 'required'
                labelClasses = 'text-sm'
            %}

            {% partial 'form/select'
                labelText = 'profile_role_department'|_
                id = 'property[role_department]'
                name = 'property[role_department]'
                options = departmentOptions
                required = 'required'
                labelClasses = 'text-sm'
                wrapperClasses = 'mt-4'
                selectedValue = obUserEdit.property.role_department
                hideClearButton = true
            %}

            {% partial 'form/input'
                labelText = 'profile_email'|_
                type = 'email'
                id = 'email'
                name = 'email'
                value = obUserEdit.email
                required = 'required'
                labelClasses = 'text-sm'
                wrapperClasses = 'mt-4'
            %}

            {% partial 'form/input-checkbox'
                wrapperClasses = 'mt-4'
                id = 'b2b_permission'
                name = 'b2b_permission'
                labelText = 'profile_b2b_permission'|_
                checked = obUserEdit.b2b_permission
            %}

            {% partial 'form/button'
                text = 'form_save'|_
                type = 'submit'
                wrapperClasses = 'w-full md:w-auto mt-6'
            %}
        </form>
    </section>
</div>
