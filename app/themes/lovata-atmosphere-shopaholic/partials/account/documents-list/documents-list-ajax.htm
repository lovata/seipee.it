{#
Params:
- obDocumentList
#}

{# TODO: Come up with a more correct way to transfer the color sColorState #}

{% if obDocumentList is empty %}
    {% set obDocumentList = obUser.documents %}

    {% set iPage = Pagination.getPageFromRequest() %}
    {% set iMaxPage = Pagination.getMaxPage(iOrdersCount) %}
{% endif %}

{# set arOrderList = obOrderList.page(iPage, Pagination.getCountPerPage()) #}

{% for obDocument in obDocumentList %}
{% set obDocumentPositionList = obDocument.positions %}
<li class="bg-white border-y border-outline-variant lg:border-y-0 lg:border-none _order_item">
    <div class="lg:grid lg:grid-flow-col lg:grid-cols-[1fr_1fr_1fr_1fr_minmax(160px,200px)]">
        <div class="grid grid-cols-2 lg:px-3 lg:py-2 lg:block">
            <span class="text-sm font-medium lg:hidden">{{ 'account_document_number'|_ }}:&nbsp;</span>
            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                    {{ obDocument.document_number }}
                </span>
        </div>

        <div class="grid grid-cols-2 lg:py-2 lg:px-3 lg:block">
            <span class="text-sm lg:hidden">{{ 'account_document_date'|_ }}&nbsp;</span>
            <span class="text-sm text-end lg:text-start lg:text-base">
                    {{ obDocument.document_date|date('d/m/Y') }}
                </span>
        </div>

        <div class="grid grid-cols-2 lg:py-2 lg:px-3 lg:block">
            <span class="text-sm lg:hidden">{{ 'account_document_order_number'|_ }}&nbsp;</span>
            <span class="text-sm text-end lg:text-start lg:text-base">
                    {{ obDocument.seipee_document_id }}
                </span>
        </div>

        <div class="grid grid-cols-2 lg:py-2 lg:px-3 lg:block">
            <span class="text-sm lg:hidden">{{ 'account_document_see_more'|_ }}&nbsp;</span>
            <span class="text-sm text-end lg:text-start lg:text-base">
                <button type="button" class="_toggle_button" data-toggle-id="{{ obDocument.id }}"><i class="bi bi-chevron-down _toggle_icon"></i></button>
            </span>
        </div>

        <div class="grid grid-cols-2 lg:py-2 lg:px-3 lg:block">
            {% partial 'form/button'
                text='account_document_download'|_
                isGhost=true
                wrapperClasses='_document_download_button'
            %}
        </div>
    </div>
    <div class="_document_details hidden" data-toggle-target="{{ obDocument.id }}">
            <div class="hidden lg:grid gap-2 items-start bg-gray-200 lg:grid-cols-[2fr_3fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr]">
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_code'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_name'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_variant'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_um'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_quantity'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_quantity_delivered'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_unit_price'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_total_price'|_ }}</div>
                <div class="py-2 px-3 text-base font-medium">{{ 'account_order_position_shipping_date'|_ }}</div>
            </div>
            <div class="_document_position_list">
                {% for obOrderPosition in obDocumentPositionList %}
                    <div class="_document_position_list grid grid-cols-1 gap-2 lg:grid-cols-[2fr_3fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] lg:items-start" data-offer-id="{{ obOffer.id }}" data-quantity="{{ obOrderPosition.quantity }}">
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_code'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.product_code ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_name'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.description ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_variant'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.variant ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_um'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.unit_of_measure ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_quantity'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.quantity ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_quantity_delivered'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.deliverable_quantity ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_unit_price'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.unit_price ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_total_price'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.total_price ?? '-' }}
                            </span>
                        </div>
                        <div class="lg:px-3 lg:py-2 lg:block">
                            <span class="text-sm font-medium lg:hidden">{{ 'account_order_position_shipping_date'|_ }}:&nbsp;</span>
                            <span class="text-sm font-medium text-end lg:text-start lg:font-normal lg:text-base">
                                {{ obOrderPosition.delivery_date|date('d/m/Y') }}
                            </span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
</li>
{% endfor %}
